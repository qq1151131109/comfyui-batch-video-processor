# 批量视频处理扩展 - 改进版

专为ComfyUI设计的批量视频处理扩展，支持批量上传、切分处理和打包下载。界面友好，操作简单！

## 🎯 主要改进

- ✅ **去除子类别**: 所有节点都在`batch_video`类别下
- 🔼 **真正的上传**: 节点带有上传按钮，支持直接上传视频
- 🎨 **中文界面**: 所有显示文本都使用中文
- 🧹 **简化参数**: 移除普通用户不需要的高级参数
- 📦 **独立拼接**: 视频合成功能独立为单独节点

## 📋 节点说明

### 1. 批量视频加载器 (BatchVideoLoader)
**用途**: 创建上传会话并管理视频文件

**功能特点**:
- ✨ **支持真正上传**: 带有上传按钮，可直接上传视频文件
- 📁 **会话管理**: 可创建新会话或选择已有文件夹
- 📊 **自动统计**: 显示文件数量和详细信息

**使用方法**:
1. 输入会话名称（如"广告素材_20240115"）
2. 选择"创建新会话"
3. 点击上传按钮选择视频文件
4. 重复上传添加更多文件到同一会话

### 2. 视频拼接器 (VideoConcatenator)  
**用途**: 将两个视频无缝拼接

**功能特点**:
- 🔗 **无缝拼接**: 自动处理分辨率和编码参数
- ⚡ **简单易用**: 只需连接两个视频输入
- 🎬 **质量保证**: 输出高质量合成视频

**使用方法**:
1. 连接主视频输入
2. 连接结尾视频输入  
3. 输出合成后的完整视频

### 3. 批量视频切分器 (BatchVideoCutter)
**用途**: 批量切分视频文件

**功能特点**:
- ⚡ **简化操作**: 移除复杂的多线程设置
- 📏 **灵活时长**: 支持0.5秒精度的切分时长
- 📂 **自动组织**: 为每个视频创建独立文件夹

**参数说明**:
- **输入文件夹**: 从批量加载器获取的文件夹路径
- **每段时长**: 每个切分片段的时长（秒）
- **结尾视频**: 可选，如需在每段后添加结尾
- **输出前缀**: 输出文件夹名称前缀

### 4. 批量下载器 (BatchVideoDownloader)
**用途**: 打包下载处理结果

**功能特点**:
- 📦 **自动压缩**: 创建ZIP压缩包
- 📊 **统计信息**: 显示文件数量和压缩率
- ⏰ **时间戳**: 自动添加时间戳避免重名

### 5. 文件管理器 (BatchFileManager)
**用途**: 管理批处理文件

**功能特点**:
- 📋 **列表查看**: 查看所有批处理会话
- 🗑️ **定期清理**: 清理过期文件释放空间
- 📊 **统计信息**: 显示文件数量和占用空间

## 🔄 推荐工作流

### 基础流程
```
批量视频加载器 → 批量视频切分器 → 批量下载器
```

### 带结尾视频的流程  
```
批量视频加载器 → 批量视频切分器
                      ↑
LoadVideo(结尾) → 视频拼接器
```

### 完整示例工作流

1. **上传阶段**
   - 使用"批量视频加载器"创建新会话
   - 多次点击上传按钮添加视频文件
   - 查看文件列表确认上传成功

2. **处理阶段**  
   - 将文件夹路径连接到"批量视频切分器"
   - 设置切分时长（如30秒）
   - 如需添加结尾，先用LoadVideo加载结尾视频
   - 执行切分处理

3. **下载阶段**
   - 将输出文件夹连接到"批量下载器"
   - 设置压缩包名称
   - 生成下载包

4. **管理阶段**
   - 使用"文件管理器"查看历史会话
   - 定期清理过期文件

## 💡 使用技巧

### 命名规范建议
- 会话名称: `项目名_日期` (如: 广告素材_20240115)
- 输出前缀: `已处理_项目名` (如: 已处理_广告素材)

### 批量上传技巧
- 可以多次上传文件到同一会话
- 支持不同格式混合上传
- 重复文件会自动跳过

### 切分参数建议
- **短视频平台**: 15-30秒/段
- **教学内容**: 60-120秒/段  
- **预览片段**: 5-10秒/段

### 性能优化
- 单次处理建议不超过50个视频
- 大文件建议先压缩再上传
- 定期清理减少存储占用

## 🔧 技术特点

- **中文优先**: 界面完全中文化
- **简化设计**: 移除高级用户才需要的参数
- **模块化**: 每个功能独立，可灵活组合
- **容错性强**: 处理失败不影响其他文件
- **自动清理**: 临时文件自动管理

## ⚠️ 注意事项

1. **系统要求**: 需要安装FFmpeg
2. **存储空间**: 处理大量视频需要充足空间  
3. **格式支持**: 支持mp4, avi, mov, mkv, flv, wmv
4. **文件大小**: 单文件建议不超过500MB
5. **中文路径**: 完全支持中文文件名和路径

## 🆘 常见问题

**Q: 上传按钮在哪里？**
A: 在"批量视频加载器"节点的"video_file"参数右侧

**Q: 如何批量上传多个文件？**  
A: 多次点击上传按钮，每次选择一个文件，都会添加到当前会话

**Q: 视频拼接失败怎么办？**
A: 检查两个视频的格式是否兼容，建议使用相同分辨率的视频

**Q: 切分后的视频在哪里？**
A: 在ComfyUI的output/processed_batches目录下，按会话分文件夹存放

**Q: 如何清理旧文件？**
A: 使用"文件管理器"节点，选择"清理文件"操作

现在享受更简单、更好用的批量视频处理体验吧！ 🎬✨